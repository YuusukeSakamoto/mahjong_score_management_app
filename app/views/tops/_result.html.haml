.row.justify-content-center
  .col-11.rounded.text-main.px-0
    .d-flex.align-items-center.justify-content-center
      %i.fa-solid.fa-diamond
      %h4.text-center.px-1.my-3.fw-bold 対局成績 (#{conversion_kanji_num(play_type)}人麻雀)
    .border-top.border-bottom.bg-light-green.d-flex.flex-column.flex-md-row.justify-content-evenly.text-center.fw-bold.mb-4
      .d-flex.flex-column.align-items-center.flex-md-row
        .d-flex.justify-content-evenly.w-75
          %p.my-1.my-md-2.mx-2.text-nowrap= "総対局数  #{@player.total_match_count(play_type)}局"
          %p.my-1.my-md-2.mx-2.text-nowrap= "総合pt  #{@player.total_point(play_type)}pt"
        .d-flex.justify-content-evenly.w-75
          %p.my-1.my-md-2.mx-2.text-nowrap= "平均順位  #{@player.average_rank}位"
          %p.my-1.my-md-2.mx-2.text-nowrap= "連対率  #{@player.rentai_rate}%"

    .col-10.ps-md-3.mx-auto
      .d-flex.align-items-end.justify-content-between
        %p.border-green-left.fw-bold.py-1.ps-2.mb-2 順位推移
        %span.ps-1.py-1.mb-2.fs-sm ※直近10局
      - @rank_data = @player.graph_rank_data(play_type)
      = render partial: 'graphs/rank', locals: { play_type: play_type }

    .d-flex.flex-column.align-items-center.align-items-md-start.flex-md-row.justify-content-md-center
      .col-10.col-md-5.px-md-3
        %p.border-green-left.fw-bold.py-1.ps-2.mb-2 順位率
        %table.table.table-bordered.text-nowrap.px-3.text-center.text-main
          - @player.rank_results(play_type).each.with_index(1) do |rate_time, i|
            %tr.w-100
              %td.px-3.bg-lightgray.fw-bold.w-rank{scope: "row"}= "#{i}位"
              %td.px-2= "#{rate_time[0]}%"
              %td.px-2= "#{rate_time[1]}回"
      .col-10.col-md-5.pe-md-3.px-md-3
        .d-flex.justify-content-between.align-items-center.mb-2
          %p.border-green-left.fw-bold.py-1.ps-2.mb-0 直近の対局
          .d-flex.align-items-center.h-100
            %i.bx.bx-chevrons-right.h-50
            .px-0= link_to '対局一覧', matches_path, class: 'text-gray text-nowrap'
        %table.table.text-center.text-main
          - @player.get_sanyon_matches(play_type).each do |match|
            %tr
              %td.p-025.px-0= match.match_on.to_s(:date)
              - if match.current_player_point(current_player.id) >= 0
                %td.p-025.fw-bold= sprintf("%+.1f", match.current_player_point(current_player.id))
              - else
                %td.p-025.text-minus.fw-bold= sprintf("%+.1f", match.current_player_point(current_player.id))
              %td.p-025
                = link_to match_path(match),
                  class: "m-auto" do
                  %i.fa-solid.fa-list-ul
          - if @player.get_sanyon_matches(play_type).blank?
            %p.mt-4.text-main.text-center= "対局成績なし"

    .col-7.col-md-5.m-auto
      = link_to "#{conversion_kanji_num(play_type)}人麻雀の成績詳細を見る", player_path(@player),
        class: "main-btn--orange"

.border-bottom.border-2.pt-4.mb-4.w-100