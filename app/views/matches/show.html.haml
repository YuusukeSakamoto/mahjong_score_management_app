.container
  .row.mt-4
    .d-flex.justify-content-between.align-items-end.border-green-bottom-title_main.text-main
      .d-flex.align-items-end
        %h4.text-center.text-md-start.text-nowrap.fw-bold.mb-0 対局成績詳細
        .d-flex.fs-sm
          - if recording?
            %p.mb-0.ms-2="#{@match_group.get_index(params[:id].to_i)}局目"
          - else
            %p.mb-0.ms-2="#{@match.match_on.to_s(:yeardate)}"
            %p.mb-0.ms-2="#{Rule.find(@match.rule_id).name}"
      - if @match.player_id == current_player.id
        .d-flex.align-items-center.fw-bold
          %i.bx.bx-chevrons-right{style: "padding-top: 1px;"}
          .px-0= link_to '編集', edit_match_path(@match)

    .d-flex.justify-content-center.mt-2
      %table.table.col-10.col-md-6.text-nowrap.text-main.text-center.px-2
        %thead
          %tr.bg-lightgray.w-100.fw-bold
            %th.w-rank{scope: "col"} 順位
            %th.px-2{scope: "col"} プレイヤー
            %th{scope: "col"} 得点
            %th{scope: "col"} pt
            %th{scope: "col"} 家
        - @match.results.order(:rank).each do |result| 
          %tr
            %td{scope: "row"}= result.rank
            %td= Player.find(result.player_id).name
            %td= result.score
            %td= show_pt(result.point, rule_decimal_point_no_calc?(@match.rule_id))
            %td= Result::IE[result.ie - 1][0]
  - if @match.memo.present?
    .row
      .col-12.pb-2.text-main
        %p.border-green-left-table.fw-bold  対局メモ
        .mx-0.px-2.py-1
          %p.mb-0= @match.memo
  // 成績登録中の場合は、続けて成績登録するボタンを出力する
  - if recording?
    .col-8.col-md-6.m-auto
      = link_to new_match_path, class: "main-btn--green mb-3" do
        .btn-text 
          %i.fa-solid.fa-angles-right
          %span #{@match_group.matches.count + 1}局目の成績を登録
    = render partial: 'match_groups/result_table'