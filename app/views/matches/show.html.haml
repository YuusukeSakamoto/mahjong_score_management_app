.container
  .row.d-flex.justify-content-center
    = render 'shared/flash'
    .col-12.text-center.pb-2
      %p.w-lg-50.pt-3.fs-3.text-green 対局成績
  
      %p.text-main.mb-1.fs-sm
        ="日付：#{@match.match_on.strftime('%Y/%m/%d')}"
      %p.text-main.fs-sm
        ="ルール：#{Rule.find(@match.rule_id).name}"
        
      = link_to '対局成績一覧', matches_path, class: 'px-2 py-1 mb-2 rounded text-white bg-green'
      
      .d-flex.justify-content-center.mt-2
        %table.table.col-10.col-md-6.px-2
          %thead
            %tr.text-main
              %th{scope: "col"} 順位
              %th.px-2{scope: "col"} プレイヤー
              %th{scope: "col"} 得点
              %th{scope: "col"} pt
              %th{scope: "col"} 家
          - @match.results.order(:rank).each do |result| 
            %tr
              %td{scope: "row"}= result.rank
              %td= Player.find(result.player_id).name
              %td= result.score
              %td= result.point
              %td= Result::IE[result.ie - 1][0]
    .col-12.pb-2
      .match-memo.mb-4
        .fw-bold.text-main.mb-2.text-center 対局メモ
        .col-8.m-auto.rounded.border-lightgray.px-2.py-1
          - if @match.memo.blank?
            %p
          -else
            %p.text-dark.mb-0= @match.memo
      .col-6.m-auto.mt-3.mb-3
        = link_to '編集する', edit_match_path(@match), class: 'btn d-block rounded fw-bold box-shadow text-white px-5 py-3  bg-green'
      // 成績登録から遷移してきたら、続けて成績登録するボタンを出力する
      - before_uri = URI.parse(request.referer)
      - if Rails.application.routes.recognize_path(before_uri.path)[:action] == "new" 
        .col-6.m-auto
          = link_to '続けて成績登録する', new_match_path, class: 'btn d-block rounded fw-bold box-shadow text-white px-3 px-md-5 py-3  bg-orange'
